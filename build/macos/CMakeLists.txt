cmake_minimum_required(VERSION 3.25.0)
set(CMAKE_CXX_FLAGS "-I \"../..\" -I \"../../Dependencies/macos\" -std=c++20 -fomit-frame-pointer -fno-strict-aliasing -fno-rtti -fno-exceptions -Ofast -Wall -Wpedantic -Wextra -Werror -Wconversion -pedantic-errors -D lucy_major_version=0 -D lucy_middle_version=0 -D lucy_minor_version=1 -D lucy_mac=")
set_source_files_properties("../../Lucy.metal" PROPERTIES LANGUAGE METAL COMPILE_FLAGS "-I \"../..\" -std=metal3.0 -Werror -D lucy_major_version=0 -D lucy_middle_version=0 -D lucy_minor_version=1 -D lucy_mac=")
set(CMAKE_CONFIGURATION_TYPES Release CACHE STRING "" FORCE)
set(CMAKE_SUPPRESS_REGENERATION true)
file(GLOB_RECURSE resources "../../Resources/*")
get_filename_component(aresources "../../Resources" ABSOLUTE)
foreach(resource ${resources})
    file(RELATIVE_PATH tresource ${aresources} ${resource})
    list(APPEND fresources "../../Resources/${tresource}")
    get_filename_component(nresource ${tresource} DIRECTORY)
    set_property(SOURCE ${resource} PROPERTY MACOSX_PACKAGE_LOCATION "Resources/${nresource}")
    source_group("Resources/${nresource}" FILES "${resource}")
endforeach()
project(Lucy)
set(TARGET Lucy PROPERTY INTERPROCEDURAL_OPTIMIZATION TRUE)
add_executable(Lucy MACOSX_BUNDLE "../../Lucy.cpp" "../../Lucy.metal" ${fresources})
set_target_properties(Lucy PROPERTIES BUNDLE TRUE MACOSX_BUNDLE_GUI_IDENTIFIER "iris.technologies.lucy" MACOSX_BUNDLE_BUNDLE_VERSION "0.0.1" MACOSX_BUNDLE_SHORT_VERSION_STRING "0.0.1" MACOSX_BUNDLE_BUNDLE_NAME Lucy)
target_include_directories(Lucy PRIVATE "../..")
target_link_libraries(Lucy PRIVATE "-framework AppKit")
target_link_libraries(Lucy PRIVATE "-framework QuartzCore")
target_link_libraries(Lucy PRIVATE "-framework MetalKit")
target_link_libraries(Lucy PRIVATE "-framework Metal")